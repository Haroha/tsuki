
(function(d){var BASE_URL="//taxel.jp",TAG_URL="/article.json",CLICK_URL="/click",INVIEW_URL="/l.gif",NOT_FOUND_URL="/not_found",REQUEST_ID_COOKIE_NAME="GMORW_RID",FIRST_COOKIE_ID_COOKIE_NAME="GMORW_UID",PATTERN_ID_COOKIE_NAME="GMORW_PTN_",SESSION_COOKIE_NAME="GMORW_SID_",GMOSSP_XID_NAME="gmoam_xid",GMOSSP_REDIRECT_FLAG_NAME="TAXEL_SRF",AKANE_FQ_COOKIE_NAME="TAXEL_AK_FQ",GMOSSP_REDIRECT_URL="//sp.gmossp-sp.jp/taxel/fw.php?url=",GMOSSP_REDIRECT_DOMAIN_PATH=/sp\.gmossp-sp\.jp\/ads\/fw\.ad/,REQUEST_EXPIRE_SECOND=15,FIRST_COOKIE_ID_EXPIRE_SECOND=180*24*60*60,PATTERN_ID_EXPIRE_SECOND=30*24*60*60,SESSION_EXPIRE_SECOND=30*60,TAXEL_SRF_EXPIRE_SECOND=30*24*60*60,AKANE_FQ_EXPIRE_SECOND=90*24*60*60,SSPAPI="//sp.gmossp-sp.jp/ads/ssp.ad",SSPFILLERAPI="//sp.gmossp-sp.jp/ads/filler.ad",DOKURYOJS="//dokuryojs.sp.gmossp-sp.jp/js/gmo-am-reading.js",MOMENTUMJS="//assets-momentum.akamaized.net/js/axss.js",UA=window.navigator.userAgent,IOS=new RegExp("iPhone|iPad|iPod").test(UA),PREVIEW_QUERY_STRING="rpvw",ABTEST_PREVIEW_QUERY_STRING="abtestpreviewid",RANDOM_QUERY_STRING="txrnd",OPTIONAL_QUERY_STRING="opt",DUMMY_MEDIA_ID="0",DUMMY_WIDGET_ID="0",TAXEL_POLICY="http://taxel.jp/policy/",GMOSSP_REDIRECT_LINK_MAX=20,AB_TEST_PARENT=Math.random().toString(36).slice(-8),TAXEL_SC_CLZ="taxel-script",TAXEL_ADS_CLZ="taxel-adsense",TAXEL_IF_CLZ="taxel-ad-frame",TAXEL_IF_ID="taxel-iframe",TAXEL_AD_MOVIE_CT_ID="taxel-ad-movie-content",TAXEL_ARTICLE_NOT_EXISTS_ID="taxel_article_not_exists",MAX_IF_TIMER_RUN=120,IF_TIMEOUT=250,gmoArticleIdRule=parseInt("1"),urlReplaceRules=JSON.parse("{\"[?#].*\":\"\"}"),cookieId="03cf68f5a6dd56ac7e5be0a3c31afd4b78",mediaId="350",VALID_GMOSSP_REDIRECT=parseInt("1"),IS_AMP="",crawlRule=JSON.parse("{\"optional\":{\"tag\":\"div.writer_info p.name a\"}}"),INVIEW_PIXEL_NUM=225,ADMOVIE_NEAR_INVIEW_PIXEL_NUM=window.innerHeight,TAXEL_SCRIPT_NEAR_INVIEW_PX=ADMOVIE_NEAR_INVIEW_PIXEL_NUM*2,VIEWABLE_SEC=2,AD_NEWSTV=30,AD_IMOBILE="11",AD_YDN="15",AD_CRITEO="1010",AD_CRITEO_GMOSSP_CRTG_NID="3567",AD_CRITEO_CLASS="_taxel_ad_type_criteo";var __={};var gLogFrame;var gBeacons=[];var Ids=[];var timer;var createdBeaconType1FlagMap={};var beaconNumberForWidget={};var isSingleSspBeacon={};var isTaxelWidgetInsideIframe={};var widgetIframes={};var sspBeaconUrls={};var sspBeacons=[];var adObjs={};var startedAdInview=false;var layzr;var layzrEnable=1;var gNeedAdnum={};var gLoadedAdNum={};var gIsRandomDisplay={};var clientCallObj={};var isRequestClientCall=false;var adMovieObj={nodeObj:{},adObj:{},timer:{},doneNearInview:{},movieLoaded:{}};var isMomentumParamAttach={};var sspIdsInfoObj={gmosspUserId:{},gmosspQueryId:{}};var _$=function(e){return d.getElementById(e)};var fillerAd={adNum:0,spaceId:"",q:"",reqCount:{},validCount:{},isCompleted:{}};GMOADRW={};GMOADRW={adRenderCallback:function(data){if(data){var widgetNode=__.getLastWidgetNodeBySpaceId("gmo_ad_"+data.space_id);if(VALID_GMOSSP_REDIRECT){this.cookieLogGmosspSaveFlag(data.gmossp_user)}if(data.xid){GMOADRW.setGmosspXid(data.xid)}var dl=data.ads?data.ads.length:0;if(dl===0){fillerAd.adNum=0;return}var script=d.getElementById("gmossp_"+data.space_id),gWidgetId=script.getAttribute("gWidgetId"),gReqId=script.getAttribute("gReqId"),gSpaceId=script.getAttribute("gSpaceId"),gAdNum=script.getAttribute("gAdNum"),gLeadArticleId=script.getAttribute("gLeadArticleId"),gPermanentLink=script.getAttribute("gPermanentLink"),gInvalidRedirectGmossp=script.getAttribute("gInvalidRedirectGmossp");if(sspBeaconUrls[gWidgetId]===undefined){sspBeaconUrls[gWidgetId]=[]}sspIdsInfoObj.gmosspUserId[gSpaceId]=data.gmossp_user?data.gmossp_user:"";sspIdsInfoObj.gmosspQueryId[gSpaceId]=data.q?data.q:"";GMOADRW.appendSspInfoToArticleClickUrl(widgetNode,gSpaceId);isSingleSspBeacon[gWidgetId]=false;if(data.iv_beacon&&data.iv_beacon.length>0){var topBcUrls;if(IS_AMP!=="1"){topBcUrls=data.iv_beacon.map(function(b){var parentOffsetTop=GMOADRW.getParentOffsetTop(gWidgetId);return b.replace(/\{\{w\}\}/,parentOffsetTop+widgetNode.offsetTop)})}else{topBcUrls=data.iv_beacon.map(function(b){return"amp_"+b})}sspBeaconUrls[gWidgetId]=sspBeaconUrls[gWidgetId].concat(topBcUrls);isSingleSspBeacon[gWidgetId]=true}var dads=data.ads;var divs=widgetNode.getElementsByClassName("_taxel_ad_article_"+data.space_id);fillerAd.spaceId=data.space_id;fillerAd.q=data.q;Array.prototype.forEach.call(divs,function($d,i){var adPosition=i+1;if(i>=dl){i=(i-dl)%dl}if(gLoadedAdNum[gWidgetId]===undefined){gLoadedAdNum[gWidgetId]=0}gLoadedAdNum[gWidgetId]++;if(dads[i].c_type&&dads[i].c_type!=1){return}if(adObjs[gWidgetId]===undefined){adObjs[gWidgetId]=[]}if(dads[i].iv_beacon&&dads[i].iv_beacon.length>0){var beaconUrls=[];for(var j=0;j<dads[i].iv_beacon.length;j++){if(GMOADRW.getHostName(dads[i].iv_beacon[j])==="sp.gmossp-sp.jp"){if(IS_AMP==="1"){beaconUrls[j]="amp_"+dads[i].iv_beacon[j]}else{var parentOffsetTop=GMOADRW.getParentOffsetTop(gWidgetId);beaconUrls[j]=dads[i].iv_beacon[j].replace(/\{\{w\}\}/,parentOffsetTop+widgetNode.offsetTop)}}else{beaconUrls[j]=dads[i].iv_beacon[j]}}if(isSingleSspBeacon[gWidgetId]){sspBeaconUrls[gWidgetId]=sspBeaconUrls[gWidgetId].concat(beaconUrls)}if(!isSingleSspBeacon[gWidgetId]&&adObjs[gWidgetId][i]===undefined){adObjs[gWidgetId][i]={nodeObj:$d,ivBeaconUrls:beaconUrls,beaconCreated:false}}}if(dads[i]["isClientAdCall"]){var networkId=dads[i]["networkId"];if(clientCallObj[networkId]===undefined){GMOADRW.initClientCall(networkId,gReqId,gLeadArticleId,gPermanentLink,gInvalidRedirectGmossp,gWidgetId,gSpaceId,gIsRandomDisplay[gWidgetId])}GMOADRW.addClientCall(networkId,$d,dads[i],adPosition)}else{$d.parentNode.style.display="";if(dads[i].impressionUrl){var impressionUrls=dads[i].impressionUrl;if(typeof impressionUrls==="string"){impressionUrls=[impressionUrls]}if(impressionUrls.length>0){for(var j=0;j<impressionUrls.length;j++){GMOADRW.createBeaconForAdRenderCallback(impressionUrls[j],$d)}}}var div_a$=$d.getElementsByTagName("a")[0],content$=div_a$.getElementsByClassName("_taxel_recommend_content")[0];var clickUrl=dads[i].clickUrl;if(dads[i].forwardUrl){clickUrl=dads[i].forwardUrl+encodeURIComponent(clickUrl)+"&pos="+adPosition+"&rwid=1"}else{if(GMOSSP_REDIRECT_DOMAIN_PATH.test(clickUrl)){clickUrl=clickUrl+"&pos="+adPosition+"&rwid=1"}}GMOADRW.setAdClickUrl(div_a$,clickUrl,GMOADRW.createAdClickUrl(gWidgetId,cookieId,gReqId,gLeadArticleId,gSpaceId,clickUrl,gInvalidRedirectGmossp));GMOADRW.setAdImage2(div_a$,dads[i]);GMOADRW.setAdTitle(content$,dads[i].description);GMOADRW.setAdSponsor(content$,dads[i].sponsor_name)}});if(!isRequestClientCall&&layzrEnable){layzr.update().check()}var networkIds=Object.keys(clientCallObj);var clientCallAdNum=0;for(var i in networkIds){clientCallAdNum+=clientCallObj[networkIds[i]].adNum}fillerAd.adNum=clientCallAdNum;if(gNeedAdnum[gWidgetId]===gLoadedAdNum[gWidgetId]){if(isRequestClientCall){for(var networkId in clientCallObj){fillerAd.reqCount[networkId]=clientCallObj[networkId].adNum;fillerAd.validCount[networkId]=0;fillerAd.isCompleted[networkId]=false;try{switch(networkId){case AD_IMOBILE:GMOADRW.requestClientCall(networkId,gWidgetId,data.space_id,gIsRandomDisplay[gWidgetId]);break;case AD_YDN:GMOADRW.requestClientCallYdn(GMOADRW.createYdnCallUrl(clientCallObj[networkId].adUrls));break;case AD_CRITEO:GMOADRW.requestClientCallCriteo(clientCallObj[networkId].adUrls);break;default:}}catch(E){}finally{fillerAd.isCompleted[networkId]=true}}}else if(gIsRandomDisplay[gWidgetId]){this.changeAdArticle(document.getElementById("gmo_rw_"+gWidgetId),data.space_id)}}if(!isSingleSspBeacon[gWidgetId]){GMOADRW.adInview()}if(IS_AMP!=="1"){var event=document.createEvent("Event");event.initEvent("adLoaded",true,true);window.dispatchEvent(event)}}},adMovieRenderCallback:function(data){if(!data||!data.ads||data.ads.length===0){return}if(data.xid){GMOADRW.setGmosspXid(data.xid)}var ad=data.ads[0];var spaceId=data.space_id;adMovieObj.adObj[spaceId]=ad;if(ad.impressionUrl&&ad.impressionUrl.length>0){for(var i=0;i<ad.impressionUrl.length;i++){GMOADRW.otherCreateBeacon(ad.impressionUrl[i])}}var node=adMovieObj.nodeObj[spaceId];node.style.display="inline";var movieContent;if(typeof ad.html_iframe==="undefined"||ad.html_iframe){movieContent=document.createElement("iframe");movieContent.scrolling="no";movieContent.frameBorder="0";movieContent.style.width="100%";movieContent.height="0"}else{movieContent=document.createElement("div");movieContent.style.width="100%";movieContent.height="0"}movieContent.className="_taxel_ad_movie_content";var movieId=TAXEL_AD_MOVIE_CT_ID+"_"+spaceId;movieContent.setAttribute("id",movieId);var content=node.getElementsByClassName("_taxel_ad_movie_content")[0];content.parentNode.replaceChild(movieContent,content);var linkTag=node.getElementsByTagName("a")[0];if(ad.networkId===AD_NEWSTV){if(linkTag){node.removeChild(linkTag)}}else{var titleEl=node.getElementsByClassName("_taxel_ad_art_title")[0];if(titleEl){titleEl.innerHTML=ad.description||""}var sponsorEl=node.getElementsByClassName("_taxel_ad_art_sponsor")[0];if(sponsorEl){sponsorEl.innerHTML=ad.sponsor_name||""}else{var orgSponsorEl=node.getElementsByClassName("_taxel_ad_art_org_sponsor_name")[0];if(orgSponsorEl){orgSponsorEl.innerHTML=ad.sponsor_name||""}}var clickUrl=ad.clickUrl;if(linkTag){GMOADRW.setAdClickUrl(linkTag,clickUrl,clickUrl)}}if(ad.html_load==="top"){GMOADRW.adMovieNearInview(spaceId)}else{content=node.getElementsByClassName("_taxel_ad_movie_content")[0];var adHeightPosition=GMOADRW.getContentTop(content);var nearInviewBeaconPosition=adHeightPosition-ADMOVIE_NEAR_INVIEW_PIXEL_NUM;var px=GMOADRW.getViewablePixel();if(0!=adHeightPosition&&px>=nearInviewBeaconPosition){GMOADRW.adMovieNearInview(spaceId)}window.addEventListener("scroll",function(){clearTimeout(adMovieObj.timer[spaceId]);adMovieObj.timer[spaceId]=setTimeout(function(){var px=GMOADRW.getViewablePixel();var adHeightPosition=GMOADRW.getContentTop(content);var nearInviewBeaconPosition=adHeightPosition-ADMOVIE_NEAR_INVIEW_PIXEL_NUM;if(0!=adHeightPosition&&px>=nearInviewBeaconPosition){GMOADRW.adMovieNearInview(spaceId)}},50)},false)}GMOADRW.adMovieInview(spaceId)},adEmptyCallback:function(data){if(!data){return}if(VALID_GMOSSP_REDIRECT){this.cookieLogGmosspSaveFlag(data.gmossp_user)}if(data.xid){GMOADRW.setGmosspXid(data.xid)}},requestAdWithAdFraudCheck:function(spaceId,adNum,widgetId,reqId,leadArticleId,permanentLink,ptnId,invalidRedirectGmossp,adFraudBidPoints){if(!adFraudBidPoints[spaceId]||adFraudBidPoints[spaceId]<=Math.floor(Math.random()*1e4)){GMOADRW.requestAd(spaceId,adNum,widgetId,reqId,leadArticleId,permanentLink,ptnId,invalidRedirectGmossp)}else{isMomentumParamAttach[spaceId]=true;var r="heron_"+Math.floor(Math.random()*0x10000000000000000);var ele1=d.createElement("script");ele1.src=MOMENTUMJS;ele1.onload=function(){var momentumDynamicScript="var heron_params = \"\";"+"try {"+"  heron_params = momentum_heron.get_prebid_params(\""+r+"\");"+"} catch (e) {"+"  if(e.message) heron_params = e.message; else heron_params  = \"unknown\";"+"}";var ele2=d.createElement("script");ele2.language="javascript";ele2.id=r;ele2.innerHTML=momentumDynamicScript;d.getElementsByTagName("head")[0].appendChild(ele2);GMOADRW.requestAd(spaceId,adNum,widgetId,reqId,leadArticleId,permanentLink,ptnId,invalidRedirectGmossp)};d.getElementsByTagName("head")[0].appendChild(ele1)}},requestAd:function(spaceId,adNum,widgetId,reqId,leadArticleId,permanentLink,ptnId,invalidRedirectGmossp){var sspAPI=SSPAPI+"?space_id="+spaceId+"&ad_format=jsonp&callback=GMOADRW.adRenderCallback&rwid=1&ad_num="+adNum+"&gmorw_ptn="+ptnId+"&crtg="+encodeURI(window.crtg_content)+"&pageurl="+GMOADRW.getEncodedPageUrl()+"&ref="+GMOADRW.getEncodedReferrer()+"&r="+Math.random(),script=d.createElement("script");sspAPI+=GMOADRW.getGmosspXid();if(isMomentumParamAttach[spaceId]&&heron_params){sspAPI+="&heron="+heron_params}script.src=sspAPI;script.setAttribute("id","gmossp_"+spaceId);script.setAttribute("gWidgetId",widgetId);script.setAttribute("gReqId",reqId);script.setAttribute("gSpaceId",spaceId);script.setAttribute("gAdNum",adNum);script.setAttribute("gLeadArticleId",leadArticleId);script.setAttribute("gPermanentLink",permanentLink);script.setAttribute("gInvalidRedirectGmossp",invalidRedirectGmossp);d.getElementsByTagName("head")[0].appendChild(script)},requestEmptyAd:function(spaceId){var sspAPI=SSPAPI+"?space_id="+spaceId+"&ad_format=jsonp&callback=GMOADRW.adEmptyCallback&rwid=1",script=d.createElement("script");sspAPI+=GMOADRW.getGmosspXid();script.src=sspAPI;d.getElementsByTagName("head")[0].appendChild(script)},requestAdMovieWithAdFraudCheck:function(spaceId,adNum,widgetId,ptnId,adFraudBidPoints){if(!adFraudBidPoints[spaceId]||adFraudBidPoints[spaceId]<=Math.floor(Math.random()*1e4)){GMOADRW.requestAdMovie(spaceId,adNum,widgetId,ptnId)}else{isMomentumParamAttach[spaceId]=true;var r="heron_"+Math.floor(Math.random()*0x10000000000000000);var ele1=d.createElement("script");ele1.src=MOMENTUMJS;ele1.onload=function(){var momentumDynamicScript="var heron_params = \"\";"+"try {"+"  heron_params = momentum_heron.get_prebid_params(\""+r+"\");"+"} catch (e) {"+"  if(e.message) heron_params = e.message; else heron_params  = \"unknown\";"+"}";var ele2=d.createElement("script");ele2.language="javascript";ele2.id=r;ele2.innerHTML=momentumDynamicScript;d.getElementsByTagName("head")[0].appendChild(ele2);GMOADRW.requestAdMovie(spaceId,adNum,widgetId,ptnId)};d.getElementsByTagName("head")[0].appendChild(ele1)}},requestAdMovie:function(spaceId,adNum,widgetId,ptnId){var sspAPI=SSPAPI+"?space_id="+spaceId+"&ad_format=jsonp&callback=GMOADRW.adMovieRenderCallback&rwid=1&ad_num="+adNum+"&gmorw_ptn="+ptnId+"&pageurl="+GMOADRW.getEncodedPageUrl()+"&ref="+GMOADRW.getEncodedReferrer()+"&r="+Math.random(),script=d.createElement("script");var gmomAkFq=__.getCookieValue(AKANE_FQ_COOKIE_NAME);if(gmomAkFq){sspAPI+="&gmom_ak_fq="+gmomAkFq}sspAPI+=GMOADRW.getGmosspXid();if(isMomentumParamAttach[spaceId]&&heron_params){sspAPI+="&heron="+heron_params}script.src=sspAPI;script.setAttribute("id","gmossp_"+spaceId);script.setAttribute("gWidgetId",widgetId);script.setAttribute("gSpaceId",spaceId);script.setAttribute("gAdNum",adNum);script.setAttribute("async","true");d.getElementsByTagName("head")[0].appendChild(script)},createAdClickUrl:function(widgetId,cookieId,reqId,leadArticleId,spaceId,clickUrl,invalidRedirectGmossp){return BASE_URL+CLICK_URL+"?wi="+widgetId+"&id="+cookieId+"&ri="+reqId+"&li="+leadArticleId+"&si="+spaceId+"&u="+encodeURIComponent(clickUrl+"&gmorw_ptn="+__.getCookieValue(PATTERN_ID_COOKIE_NAME+widgetId))+"&irf="+invalidRedirectGmossp+"&gu="+sspIdsInfoObj.gmosspUserId[spaceId]+"&q="+sspIdsInfoObj.gmosspQueryId[spaceId]},appendSspInfoToArticleClickUrl:function(widgetNode,spaceId){var divs=widgetNode.getElementsByClassName("_taxel_recommend_article");Array.prototype.forEach.call(divs,function(div){var aTag=div.getElementsByTagName("a")[0];var aTagUrl=aTag.getAttribute("onmousedown");var newATagUrl=aTagUrl+"+\"&gu="+sspIdsInfoObj.gmosspUserId[spaceId]+"\"";aTag.setAttribute("onmousedown",newATagUrl)})},setAdClickUrl:function(div_a$,clickUrl,adClickUrl){div_a$.setAttribute("href",clickUrl);if(!div_a$.hasAttribute("target")){div_a$.setAttribute("target","_blank")}div_a$.setAttribute("onclick","");div_a$.setAttribute("onmousedown","this.href=\""+adClickUrl+"\"")},setAdImage:function(d$,imageUrl){var imgTag$=d$.querySelector("._taxel_ad_art_img")?d$.querySelector("._taxel_ad_art_img"):d$.querySelector("._taxel_ad_art_img_2")?d$.querySelector("._taxel_ad_art_img_2"):null;if(imgTag$){if(layzrEnable){imgTag$.setAttribute("data-layzr-normal",imageUrl)}else{imgTag$.style.backgroundImage="url(\""+imageUrl+"\")"}imgTag$.setAttribute("data-layzr-bg","")}var imgSrcTag$=d$.querySelector("._taxel_ad_art_img_src");if(imgSrcTag$){if(layzrEnable){imgSrcTag$.setAttribute("data-layzr-normal",imageUrl)}else{imgSrcTag$.style.backgroundImage="url(\""+imageUrl+"\")"}}},setAdImage2:function(d$,ads$){var imgTag$=d$.querySelector("._taxel_ad_art_img"),img2Tag$=d$.querySelector("._taxel_ad_art_img_2"),imgSrcTag$=d$.querySelector("._taxel_ad_art_img_src"),imgKeys=["imageUrl","ImageUrl2Small","imageUrl2"],imgKeys2=["ImageUrl2Small","imageUrl2","imageUrl"];if(img2Tag$){for(var i=0;i<imgKeys2.length;i++){var key=imgKeys2[i];if(ads$[key]&&ads$[key]!==""){if(layzrEnable){img2Tag$.setAttribute("data-layzr-normal",ads$[key]);img2Tag$.setAttribute("data-layzr-bg","")}else{img2Tag$.style.backgroundImage="url(\""+ads$[key]+"\")"}return}}}if(imgTag$){for(var i=0;i<imgKeys.length;i++){var key=imgKeys[i];if(ads$[key]&&ads$[key]!==""){if(layzrEnable){imgTag$.setAttribute("data-layzr-normal",ads$[key]);imgTag$.setAttribute("data-layzr-bg","")}else{imgTag$.style.backgroundImage="url(\""+ads$[key]+"\")"}return}}}if(imgSrcTag$){if(layzrEnable){imgSrcTag$.setAttribute("data-layzr-normal",ads$.imageUrl)}else{imgSrcTag$.style.backgroundImage="url(\""+ads$.imageUrl+"\")"}}},setAdTitle:function(d$,title){var title$=d$.querySelector("._taxel_ad_art_title");if(title$){title$.innerHTML=title}},setAdSponsor:function(d$,sponsor){var sponsor$=d$.querySelector("._taxel_ad_art_sponsor");if(sponsor$){sponsor$.innerHTML=sponsor?"PR ("+sponsor+")":""}else{var org_sponsor$=d$.querySelector("._taxel_ad_art_org_sponsor_name");if(org_sponsor$){org_sponsor$.innerHTML=sponsor?sponsor:""}}},setAdSponsorForcibly:function(d$,sponsor){var s1=d$.querySelector("._taxel_ad_art_sponsor");var s2=d$.querySelector("._taxel_ad_art_org_sponsor");var s3=d$.querySelector("._taxel_sponsred");var s4=d$.querySelector(".taxel_sponsred");var s5=d$.querySelector("._taxel_sponsored");if(s1){s1.innerHTML=sponsor}else if(s2){s2.innerHTML=sponsor}else if(s3){s3.innerHTML=sponsor}else if(s4){s4.innerHTML=sponsor}else if(s5){s5.innerHTML=sponsor}},getEncodedPageUrl:function(){var pageurl="";try{pageurl=window.top.location.href}catch(e){}if(pageurl!==""){return encodeURIComponent(pageurl)}return""},getEncodedReferrer:function(){var referrer="";try{referrer=window.top.document.referrer}catch(e){referrer=document.referrer}if(IS_AMP){referrer=referrer.split("?")[0]}return encodeURIComponent(referrer)},initClientCall:function(networkId,reqId,leadArticleId,permanentLink,invalidRedirectGmossp,widgetId,spaceId,isRandomDisplay){isRequestClientCall=true;clientCallObj[networkId]={adUrls:null,forwardUrl:[],impressionUrls:[],adDocument:[],imobilePid:[],adNum:0,widgetId:widgetId,spaceId:spaceId,reqId:reqId,leadArticleId:leadArticleId,permanentLink:permanentLink,isRandomDisplay:isRandomDisplay,invalidRedirectGmossp:invalidRedirectGmossp,ydnIdentificationKey:null}},addClientCall:function(networkId,$d,adData,adPosition){if(adData["adCallUrl"]){clientCallObj[networkId].adUrls=adData["adCallUrl"]}clientCallObj[networkId].impressionUrls.push(adData["impressionUrl"]);var forwardUrl=adData["forwardUrl"];forwardUrl=forwardUrl.replace(/&url=$/,"&pos="+adPosition+"&rwid=1&url=");clientCallObj[networkId].forwardUrl.push(forwardUrl);if(networkId===AD_IMOBILE){clientCallObj[networkId].imobilePid.push(adData["imobilePid"])}clientCallObj[networkId].adNum++;clientCallObj[networkId].adDocument.push($d)},getTimeLineRandomNum:function(){return Math.floor(1e7*Math.random())},getRandomNum:function(){return Math.floor(Math.random()*1e7)},getTimestamp:function(){return parseInt((new Date).getTime())},createYdnCallUrl:function(url){return url.replace(new RegExp("{timelineRandomNum}"),GMOADRW.getTimeLineRandomNum()).replace(new RegExp("{randomNum}"),GMOADRW.getRandomNum()).replace(new RegExp("{randomNum}"),GMOADRW.getRandomNum()).replace(new RegExp("{timestamp}"),GMOADRW.getTimestamp()).replace(new RegExp("{u}"),encodeURIComponent(d.location.href.toString()))},requestClientCallYdn:function(requestUrl){if(typeof GMOADRW.originalYadsRenderAd_v2==="undefined"){if(typeof window.yadsRenderAd_v2!=="undefined"){GMOADRW.originalYadsRenderAd_v2=window.yadsRenderAd_v2}else{GMOADRW.originalYadsRenderAd_v2=function(){}}window.yadsRenderAd_v2=function(tag,params){if(clientCallObj[AD_YDN].ydnIdentificationKey===params.pos_info[0].p_elem){GMOADRW.taxelYadsRenderAd_v2(tag,params)}else{GMOADRW.originalYadsRenderAd_v2(tag,params)}}}if(typeof GMOADRW.originalYadsRequestAdUrl==="undefined"){if(typeof window.yadsRequestAdUrl!=="undefined"){GMOADRW.originalYadsRequestAdUrl=window.yadsRequestAdUrl}else{GMOADRW.originalYadsRequestAdUrl=function(){}}window.yadsRequestAdUrl=function(data){if(data&&data.p_elem&&data.adUrl&&clientCallObj[AD_YDN].ydnIdentificationKey===data.p_elem){GMOADRW.requestClientCallJsonp(data.adUrl)}else{GMOADRW.originalYadsRequestAdUrl(data)}}}clientCallObj[AD_YDN].ydnIdentificationKey=GMOADRW.getQueryValue(requestUrl,"p_elem");GMOADRW.requestClientCallJsonp(requestUrl)},requestClientCallJsonp:function(requestUrl){var script=d.createElement("script");script.src=requestUrl;d.getElementsByTagName("head")[0].appendChild(script)},taxelYadsRenderAd_v2:function(tag,params){var needAdNum=clientCallObj[AD_YDN].adNum;for(var i=0;i<needAdNum;i++){if(tag.length===i)break;var vdiv=d.createElement("div");vdiv.innerHTML=tag[i];var dom=vdiv.querySelector(".yads_ad");if(dom==null)continue;var adUrl=dom.querySelector("a").getAttribute("href");if(adUrl.lastIndexOf("http",0)!==0){adUrl=d.location.protocol+adUrl}var clickUrl=clientCallObj[AD_YDN].forwardUrl[i]+encodeURIComponent(adUrl);var imageUrl=dom.querySelector(".yads_ad_img").style.backgroundImage.replace(/url\("?([^"()]+).*\)/,"$1");var title=dom.querySelector(".yads_ad_title").innerText;var sponsor=dom.querySelector(".yads_ad_adv").innerText;var $d=clientCallObj[AD_YDN].adDocument[i];var div_a$=$d.querySelector("a");$d.parentNode.style.display="";GMOADRW.setAdClickUrl(div_a$,clickUrl,GMOADRW.createAdClickUrl(clientCallObj[AD_YDN].widgetId,cookieId,clientCallObj[AD_YDN].reqId,clientCallObj[AD_YDN].leadArticleId,clientCallObj[AD_YDN].spaceId,clickUrl,clientCallObj[AD_YDN].invalidRedirectGmossp));GMOADRW.setAdImage(div_a$,imageUrl);GMOADRW.setAdTitle(div_a$,title);GMOADRW.setAdSponsorForcibly(div_a$,sponsor);var yadsAdInfo=dom.querySelector(".yads_ad_info a");yadsAdInfo.querySelector("span").innerText="Yahoo! JAPAN広告";var imarkTag$=$d.querySelector("._taxel_ad_mark");if(imarkTag$){imarkTag$.appendChild(yadsAdInfo);imarkTag$.style.display=""}else{var imark$=d.createElement("div");imark$.className="_taxel_ad_mark _taxel_ad_mark_ydn";imark$.appendChild(yadsAdInfo);$d.appendChild(imark$)}fillerAd.validCount[AD_YDN]++}if(layzrEnable){layzr.update().check()}if(clientCallObj[AD_YDN].isRandomDisplay){GMOADRW.changeAdArticle(document.getElementById("gmo_rw_"+clientCallObj[AD_YDN].widgetId),clientCallObj[AD_YDN].spaceId)}},requestClientCall:function(networkId,widgetId,spaceId,isRandom){var client=new XMLHttpRequest;client.onreadystatechange=function(){if(client.readyState==4&&client.status==200){var response=JSON.parse(client.responseText);var ads=response.result.ads;var asid=response.result.asid;var needAdNum=clientCallObj[networkId].adNum;for(var i=0;i<needAdNum;i++){if(ads.length===i){break}var advid=ads[i]["advid"];var ctid=ads[i]["ctid"];var vh=ads[i]["vh"];var eid=ads[i]["eid"];var pid=clientCallObj[networkId].imobilePid[i];var adUrl="//spsvc3.i-mobile.co.jp/ad_link.ashx?pid="+pid+"&asid="+asid+"&advid="+advid+"&ctid="+ctid+"&vh="+vh;var clickUrl=clientCallObj[networkId].forwardUrl[i]+encodeURIComponent(adUrl);var imageUrl="//spcdnsp.i-mobile.co.jp/ad_creative.ashx?advid="+advid+"&eid="+eid;var description=ads[i]["description"];var sponsorName=ads[i]["sponsored"];var $d=clientCallObj[networkId].adDocument[i];var div_a$=$d.getElementsByTagName("a")[0],content$=div_a$.getElementsByClassName("_taxel_recommend_content")[0];$d.parentNode.style.display="";GMOADRW.setAdClickUrl(div_a$,clickUrl,GMOADRW.createAdClickUrl(widgetId,cookieId,clientCallObj[networkId].reqId,clientCallObj[networkId].leadArticleId,spaceId,clickUrl,clientCallObj[networkId].invalidRedirectGmossp));GMOADRW.setAdImage(div_a$,imageUrl);GMOADRW.setAdTitle(content$,description);GMOADRW.setAdSponsor(content$,sponsorName);fillerAd.validCount[networkId]++}}if(layzrEnable){layzr.update().check()}if(isRandom){GMOADRW.changeAdArticle(document.getElementById("gmo_rw_"+widgetId),spaceId)}};client.open("get",clientCallObj[networkId].adUrls,true);client.send(null)},initCriteo:function(){window.crtg_nid=AD_CRITEO_GMOSSP_CRTG_NID;window.crtg_cookiename="crtg_rta";window.crtg_varname="crtg_content";window.crtg_rnd=Math.floor(Math.random()*99999999999);window.crtg_content=__.getCookieValue(window.crtg_cookiename);var criteoCookieGrantUrl=location.protocol+"//rtax.criteo.com/delivery/rta/rta.js?netId="+encodeURIComponent(window.crtg_nid);criteoCookieGrantUrl+="&cookieName="+encodeURIComponent(window.crtg_cookiename);criteoCookieGrantUrl+="&rnd="+window.crtg_rnd;criteoCookieGrantUrl+="&varName="+encodeURIComponent(window.crtg_varname);var script=d.createElement("script");script.type="text/javascript";script.src=criteoCookieGrantUrl;script.async=true;if(d.getElementsByTagName("head").length>0){d.getElementsByTagName("head")[0].appendChild(script)}else if(d.getElementsByTagName("body").length>0){d.getElementsByTagName("body")[0].appendChild(script)}},requestClientCallCriteo:function(adCallUrl){var needAdNum=clientCallObj[AD_CRITEO].adNum;for(var i=0;i<needAdNum;i++){var criteoCallbackName="criteoAdRenderCallback_"+(new Date).getTime().toString(16)+"_"+Math.floor(Math.random()*1e3).toString(16)+"_"+i;window[criteoCallbackName]=function(adIndex){return function(data){if(data.response_status!=0){return}if(data.products.length===0){return}var clickUrl=clientCallObj[AD_CRITEO].forwardUrl[adIndex]+encodeURIComponent(data.products[0].click_url);var imageUrl=data.products[0].image.url;var title=data.products[0].title+"-"+data.products[0].description;var sponsorName=data.advertiser.description;var $d=clientCallObj[AD_CRITEO].adDocument[adIndex];$d.classList?$d.classList.add(AD_CRITEO_CLASS):$d.className=AD_CRITEO_CLASS;var div_a$=$d.getElementsByTagName("a")[0],content$=div_a$.getElementsByClassName("_taxel_recommend_content")[0];var sponsor$=content$.querySelector(".taxel_sponsred")||content$.querySelector("._taxel_sponsred")||content$.querySelector("._taxel_sponsored");if(sponsor$){sponsor$.innerText="";sponsor$.className="_taxel_ad_art_sponsor"}$d.parentNode.style.display="";GMOADRW.setAdClickUrl(div_a$,clickUrl,GMOADRW.createAdClickUrl(clientCallObj[AD_CRITEO].widgetId,cookieId,clientCallObj[AD_CRITEO].reqId,clientCallObj[AD_CRITEO].leadArticleId,clientCallObj[AD_CRITEO].spaceId,clickUrl,clientCallObj[AD_CRITEO].invalidRedirectGmossp));GMOADRW.setAdImage(div_a$,imageUrl);GMOADRW.setAdTitle(div_a$,title);GMOADRW.setAdSponsor(div_a$,sponsorName);if(data.privacy&&data.privacy.optout_click_url&&data.privacy.optout_image_url){var criteoAdInfo=d.createElement("a");criteoAdInfo.setAttribute("href",data.privacy.optout_click_url);criteoAdInfo.setAttribute("target","_blank");criteoAdInfo.className="_taxel_ad_mark_criteo_a_tag";var criteoAdImage=d.createElement("img");criteoAdImage.setAttribute("src",data.privacy.optout_image_url);criteoAdInfo.appendChild(criteoAdImage);var imarkTag$=$d.querySelector("._taxel_ad_mark");if(imarkTag$){var imarkATag$=$d.querySelector("._taxel_ad_mark_criteo_a_tag");if(!imarkATag$){imarkTag$.appendChild(criteoAdInfo);imarkTag$.style.display=""}}else{var imark$=d.createElement("div");imark$.className="_taxel_ad_mark _taxel_ad_mark_criteo";imark$.appendChild(criteoAdInfo);$d.appendChild(imark$)}}if(data.impression_pixels&&data.impression_pixels.length>0){for(var i=0;i<data.impression_pixels.length;i++){GMOADRW.createBeaconForAdRenderCallback(data.impression_pixels[0].url,$d)}}var sspImpUrls=clientCallObj[AD_CRITEO].impressionUrls;if(sspImpUrls&&sspImpUrls.length>0){for(var i=0;i<sspImpUrls.length;i++){GMOADRW.createBeaconForAdRenderCallback(sspImpUrls[i],$d)}}if(layzrEnable){layzr.update().check()}if(clientCallObj[AD_CRITEO].isRandomDisplay){GMOADRW.changeAdArticle(document.getElementById("gmo_rw_"+clientCallObj[AD_CRITEO].widgetId),clientCallObj[AD_CRITEO].spaceId)}fillerAd.validCount[AD_CRITEO]++}}(i);var requestUrl=adCallUrl.replace(/{callback}/g,criteoCallbackName);GMOADRW.requestClientCallJsonp(requestUrl)}},decodeHtml:function(html){var txt=d.createElement("textarea");txt.innerHTML=html;return txt.value},createInviewBeacons:function(widgetId,reqId,leadArticleId,elementId){var dEle=__.getLastWidgetNodeById(elementId);dEle.insertBefore(GMOADRW.createBeacon(widgetId,"TOP",0),dEle.firstChild);GMOADRW.insertAfter(GMOADRW.createBeacon(widgetId,"BOTTOM",2),dEle.lastChild);GMOADRW.refreshBeacons(widgetId,leadArticleId,reqId);GMOADRW.inviewLog(leadArticleId,widgetId,reqId)},cookieLogGmosspSaveFlag:function(gmossp_user){if(gmossp_user){if(__.getCookieValue(GMOSSP_REDIRECT_FLAG_NAME)){GMOADRW.removeCookie(GMOSSP_REDIRECT_FLAG_NAME)}}else{__.setCookieValue(GMOSSP_REDIRECT_FLAG_NAME,1,TAXEL_SRF_EXPIRE_SECOND)}},setGmosspXid:function(xid){try{window.localStorage.setItem(GMOSSP_XID_NAME,xid)}catch(e){}},getGmosspXid:function(){try{return"&xid="+(window.localStorage.getItem(GMOSSP_XID_NAME)||"")}catch(e){return""}},insertRw:function(json,id,spaceId,adNum,adTypes,widgetId,reqId,leadArticleId,permanentLink,ptnId,sessionId,sessionStartTimestamp,isPreviewContentTag,isRandomDisplay,invalidRedirectGmossp,isAbTestWidgetUseIframe,dokuryoUnitKey,widgetOptions,adFraudBidPoints){var patternIdCookieName=PATTERN_ID_COOKIE_NAME+widgetId;if(ptnId===""){if(__.hasCookie(patternIdCookieName)){GMOADRW.removeCookie(patternIdCookieName)}}else{__.setCookieValue(patternIdCookieName,ptnId,PATTERN_ID_EXPIRE_SECOND)}var session=sessionId+"."+sessionStartTimestamp;__.setCookieValue(SESSION_COOKIE_NAME+mediaId,session,SESSION_EXPIRE_SECOND);isTaxelWidgetInsideIframe[widgetId]=widgetOptions.isTaxelWidgetInsideIframe===1;if(isTaxelWidgetInsideIframe[widgetId]){widgetIframes[widgetId]=GMOADRW.getIframeContainWidget()}var widgetNode=__.getLastWidgetNodeById(id);if(isPreviewContentTag){var s=document.createElement("script");s.innerHTML=json.response.html;widgetNode.appendChild(s)}else{widgetNode.innerHTML=GMOADRW.decodeHtml(json.response.html);widgetNode.className="gmo_ad_"+spaceId;if(isAbTestWidgetUseIframe){widgetNode.setAttribute("onmouseover","GMOADRW.writeReqIdCookieIframe(\""+reqId+"\")")}else{widgetNode.setAttribute("onmousedown","GMOADRW.writeReqIdCookieNew(\""+reqId+"\")")}}if(widgetNode&&window.getComputedStyle(widgetNode).getPropertyValue("display")==="none"){return}if(VALID_GMOSSP_REDIRECT&&!invalidRedirectGmossp&&__.getCookieValue(GMOSSP_REDIRECT_FLAG_NAME)){this.changeArticleLink2Gmossp(widgetNode)}gIsRandomDisplay[widgetId]=isRandomDisplay;layzrEnable=widgetOptions.layzrIsEnabled===0?0:1;if(layzrEnable){if(layzr===undefined){layzr=new Layzr({threshold:30,normal:"data-layzr-normal"});layzr.on("src:after",function(el){if(el.hasAttribute("data-layzr-bg")){el.style.backgroundImage="url(\""+el.getAttribute("src")+"\")";el.removeAttribute("src");el.removeAttribute("data-layzr-bg")}})}var mainEl=widgetNode.getElementsByClassName("_taxel_recommend_articles")[0];var animOpt=mainEl.getAttribute("data-animate");if(__.isPosInt(animOpt)&&IS_AMP!=="1"){this.setupAnimateHandler(widgetNode,spaceId,animOpt,layzr)}layzr.update().check().handlers(true)}else{var childNodes=document.querySelector("#gmo_rw_"+widgetId).querySelectorAll("a");for(var i=0;i<childNodes.length;i++){var child=childNodes[i].childNodes;for(var j=0;j<child.length;j++){if(child[j].nodeName==="DIV"&&child[j].hasAttribute("data-layzr-normal")){child[j].style.backgroundImage="url(\""+child[j].getAttribute("data-layzr-normal")+"\")";child[j].removeAttribute("data-layzr-normal");child[j].removeAttribute("data-layzr-bg");break}}}}if(gNeedAdnum[widgetId]===undefined){gNeedAdnum[widgetId]=0}gNeedAdnum[widgetId]+=adNum;if(gNeedAdnum[widgetId]===0){this.requestEmptyAd(spaceId)}else{this.requestAdWithAdFraudCheck(spaceId,adNum,widgetId,reqId,leadArticleId,permanentLink,ptnId,invalidRedirectGmossp,adFraudBidPoints)}var spaceIds=GMOADRW.findAdMovieTag(widgetNode);
var adMovieNum=spaceIds.length;for(var i=0;i<adMovieNum;i++){var requestAdNum=1;this.requestAdMovieWithAdFraudCheck(spaceIds[i],requestAdNum,widgetId,ptnId,adFraudBidPoints)}fillerAd.adNum=adNum;GMOADRW.noticeFillerAd(fillerAd);GMOADRW.createInviewBeacons(widgetId,reqId,leadArticleId,"gmo_rw_"+widgetId);this.switchLogo(widgetNode);bannerNearInviewEnable=widgetOptions.bannerNearInviewIsEnabled===0?0:1;GMOADRW.handleExternalScript(widgetNode,leadArticleId,widgetId);if(dokuryoUnitKey){GMOADRW.insertDokuryoTag(dokuryoUnitKey,widgetOptions.dokuryo)}},refreshBeacons:function(widgetId,leadArticleId,reqId){gBeacons=gBeacons.filter(function(v,i){return v[4]!==widgetId});var topBeacon=GMOADRW.getBeaconPos(GMOADRW.getBeaconId(widgetId,"TOP"),widgetId,leadArticleId,reqId);var bottomBeacon=GMOADRW.getBeaconPos(GMOADRW.getBeaconId(widgetId,"BOTTOM"),widgetId,leadArticleId,reqId);var widgetHeight=bottomBeacon[0]-topBeacon[0];var numberCount=Math.round(widgetHeight/INVIEW_PIXEL_NUM);var cBeacon;if(numberCount<=2){cBeacon=[Math.round((topBeacon[0]+bottomBeacon[0])/2),Math.round((topBeacon[1]+bottomBeacon[1])/2),"CENTER",1,widgetId,leadArticleId,reqId];gBeacons.push(cBeacon);beaconNumberForWidget[widgetId]=1;sspBeacons.push(cBeacon)}else{var insertLoopNum=numberCount-1;var centerIdx=Math.floor(insertLoopNum/2);beaconNumberForWidget[widgetId]=insertLoopNum;for(var i=0;i<insertLoopNum;i++){cBeacon=[Math.round((i+1)*INVIEW_PIXEL_NUM)+topBeacon[0],Math.round((i+1)*INVIEW_PIXEL_NUM)+topBeacon[1],"CENTER",1,widgetId,leadArticleId,reqId];gBeacons.push(cBeacon);if(centerIdx===i){sspBeacons.push(cBeacon)}}}},insertOtherRw:function(id,widgetId,ptnId,contentTag,provider,sessionId,sessionStartTimestamp,prevRequestId,reqId,leadArticleId,isAbTestWidgetUseIframe,isTaxelWidgetInsideIframeFlg){var patternIdCookieName=PATTERN_ID_COOKIE_NAME+widgetId;if(ptnId===""){if(__.hasCookie(patternIdCookieName)){GMOADRW.removeCookie(patternIdCookieName)}}else{__.setCookieValue(patternIdCookieName,ptnId,PATTERN_ID_EXPIRE_SECOND)}__.setCookieValue(SESSION_COOKIE_NAME+mediaId,sessionId+"."+sessionStartTimestamp,SESSION_EXPIRE_SECOND);isTaxelWidgetInsideIframe[widgetId]=isTaxelWidgetInsideIframeFlg===1;if(isTaxelWidgetInsideIframe[widgetId]){widgetIframes[widgetId]=GMOADRW.getIframeContainWidget()}var contentTagHtml=GMOADRW.decodeHtml(contentTag);var elements=GMOADRW.getElements(contentTagHtml);var widgetNode=__.getLastWidgetNodeById(id);var pdiv=d.createElement("div");if(isAbTestWidgetUseIframe){pdiv.setAttribute("onmouseover","GMOADRW.writeReqIdCookieIframe(\""+prevRequestId+"\")")}else{pdiv.setAttribute("onmousedown","GMOADRW.writeReqIdCookieNew(\""+prevRequestId+"\")")}if(mediaId==="13"||mediaId==="37"||mediaId==="55"){AB_TEST_PARENT="taxel_ab_test_parent"}pdiv.id=AB_TEST_PARENT;widgetNode.parentNode.insertBefore(pdiv,widgetNode);for(var i=0;i<elements.length;i++){if(elements[i].nodeName.toLowerCase()=="script"){script=d.createElement("script");var attrs=elements[i].attributes;for(var j=0;j<attrs.length;j++){script.setAttribute(attrs[j].name,attrs[j].value)}script.innerHTML=elements[i].innerHTML;widgetNode.parentNode.insertBefore(script,widgetNode)}else{var currentElement=elements[i].cloneNode(true);pdiv.appendChild(currentElement)}}GMOADRW.createInviewBeacons(widgetId,reqId,leadArticleId,AB_TEST_PARENT)},insertEmptyRW:function(widgetId,ptnId,sessionId,sessionStartTimestamp){var patternIdCookieName=PATTERN_ID_COOKIE_NAME+widgetId;if(ptnId===""){if(__.hasCookie(patternIdCookieName)){GMOADRW.removeCookie(patternIdCookieName)}}else{__.setCookieValue(patternIdCookieName,ptnId,PATTERN_ID_EXPIRE_SECOND)}var session=sessionId+"."+sessionStartTimestamp;__.setCookieValue(SESSION_COOKIE_NAME+mediaId,session,SESSION_EXPIRE_SECOND)},createBeacon:function(widgetId,type,index){var arDiv=d.createElement("div");arDiv.setAttribute("id",GMOADRW.getBeaconId(widgetId,type));arDiv.dataset.type=type;arDiv.dataset.index=index;return arDiv},sumBeaconForWidgets:function(ids){var sum=0;for(var i=0;i<ids.length;i++){sum+=beaconNumberForWidget[ids[i]]}return sum},getBeaconId:function(widgetId,type){return"gmo_rw_b_"+widgetId+"_"+type},insertAfter:function(newNode,referenceNode){referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling)},writeReqIdCookie:function(requestId){},writeReqIdCookieNew:function(requestId){var date=new Date;date.setSeconds(date.getSeconds()+REQUEST_EXPIRE_SECOND);d.cookie=REQUEST_ID_COOKIE_NAME+"="+requestId+"; expires="+date.toGMTString()+"; path=/"+";"},writeReqIdCookieIframe:function(requestId){if(!__.hasCookie(REQUEST_ID_COOKIE_NAME)){var date=new Date;date.setSeconds(date.getSeconds()+REQUEST_EXPIRE_SECOND);d.cookie=REQUEST_ID_COOKIE_NAME+"="+requestId+"; expires="+date.toGMTString()+"; path=/"+";"}},removeCookie:function(name){var date=new Date;date.setSeconds(date.getSeconds()-10);d.cookie=name+"="+"; expires="+date.toGMTString()+"; path=/"+";"},removeReqIdCookie:function(){var date=new Date;date.setSeconds(date.getSeconds()-10);d.cookie=REQUEST_ID_COOKIE_NAME+"="+"; expires="+date.toGMTString()+"; path=/"+";"},noticeFillerAd:function(fillerAd){var timerId=setInterval(function(){if(fillerAd.adNum===0){clearInterval(timerId);return}var networkIds=Object.keys(fillerAd.reqCount);var reqCountArray=[];var fillerArray=[];if(networkIds.length===0){return}for(var i in networkIds){var networkId=networkIds[i];if(!fillerAd.isCompleted[networkId]){return}var fillerCount=fillerAd.reqCount[networkId]-fillerAd.validCount[networkId];reqCountArray.push(fillerAd.reqCount[networkId]);fillerArray.push(fillerCount)}clearInterval(timerId);var fillerAPI=SSPFILLERAPI+"?space_id="+fillerAd.spaceId+"&network_id="+networkIds.join("-")+"&req_cnt="+reqCountArray.join("-")+"&filler="+fillerArray.join("-")+"&q="+fillerAd.q+"&rwid=1";script=d.createElement("script");script.src=fillerAPI;d.getElementsByTagName("head")[0].appendChild(script)},1e3)},adInview:function(){if(startedAdInview){return}startedAdInview=true;function isAdInviewFinished(){var beaconAllCreated=true;Array.prototype.forEach.call(Ids,function(wid){if(adObjs[wid]===undefined||!beaconAllCreated||isSingleSspBeacon[wid]){return}for(var j=0;j<adObjs[wid].length;j++){if(!adObjs[wid][j].beaconCreated){beaconAllCreated=false;break}}});if(beaconAllCreated){window.top.removeEventListener("scroll",registerAdTimer);window.top.removeEventListener("adLoaded",registerAdTimer)}}function startAdTimer(ad,c){if(!ad.timerId){ad.timerId=setTimeout(function(){ad.ivBeaconUrls.forEach(function(url){if(IS_AMP==="1"){url=url.match(/^amp_/)?url.substr(4).replace(/\{\{w\}\}/,c.boundingClientRect.top):url}GMOADRW.otherCreateBeacon(url)});ad.beaconCreated=true;if(IS_AMP!=="1"){isAdInviewFinished()}},1e3)}}function clearAdTimer(ad){if(ad.timerId){clearTimeout(ad.timerId);ad.timerId=null}}function registerAdTimer(c){Array.prototype.forEach.call(Ids,function(wid){if(isSingleSspBeacon[wid]){return}if(adObjs[wid]&&adObjs[wid].length>0){for(var i=0;i<adObjs[wid].length;i++){var ad=adObjs[wid][i];if(!ad.beaconCreated&&ad.nodeObj&&ad.ivBeaconUrls&&ad.ivBeaconUrls.length>0){var adNode=ad.nodeObj;var adNodeContentTop=0;if(isTaxelWidgetInsideIframe[wid]){adNodeContentTop=GMOADRW.getContentTopInsideIframe(wid,adNode)}else{adNodeContentTop=GMOADRW.getContentTop(adNode)}var adCenter=Math.floor(adNodeContentTop+adNode.getBoundingClientRect().height/2);var inside=IS_AMP==="1"?isAmpInsideViewport(c,adCenter):GMOADRW.isInsideViewport(GMOADRW.getViewablePixel(),adCenter);if(inside){startAdTimer(ad,c)}else{clearAdTimer(ad)}}}}})}function isAmpInsideViewport(c,adCenter){if(c.intersectionRect.height<0){return false}var vTop=0;var vBot=c.intersectionRect.height;if(c.boundingClientRect.top<0){vTop=Math.abs(c.boundingClientRect.top);vBot+=Math.abs(c.boundingClientRect.top)}return vTop<=adCenter&&adCenter<=vBot}if(IS_AMP==="1"){window.addEventListener("message",function(event){if(event.source!=window.parent||!event.data||event.data.sentinel!="amp"||event.data.type!="intersection"){return}event.data.changes.forEach(function(change){registerAdTimer(change)})})}else{window.top.addEventListener("adLoaded",registerAdTimer);window.top.addEventListener("scroll",registerAdTimer)}},inviewLog:function(leadArticleId,widgetId,reqId){function checkAndLogSSP(e){for(var j=0;j<sspBeacons.length;j++){var overlapped=IS_AMP==="1"?GMOADRW.isAmpOverlapped(e,sspBeacons[j]):GMOADRW.isOverlapped(GMOADRW.getPageRect(),sspBeacons[j]);if(overlapped){var wi=sspBeacons[j][4];if(sspBeaconUrls[wi]&&sspBeaconUrls[wi].length>0){sspBeaconUrls[wi].forEach(function(url){if(IS_AMP==="1"){url=url.match(/^amp_/)?url.substr(4).replace(/\{\{w\}\}/,e.boundingClientRect.top):url}GMOADRW.otherCreateBeacon(url)});delete sspBeaconUrls[wi];sspBeacons.splice(j,1);j-=1}}}}function checkAndLog(leadArticleId,widgetId,reqId,interChange){if(typeof widgetId==="undefined"&&gBeacons.length===GMOADRW.sumBeaconForWidgets(Ids)){Array.prototype.forEach.call(Ids,function(wid){GMOADRW.refreshBeacons(wid,gBeacons[0][5],gBeacons[0][6])})}checkAndLogSSP(interChange);for(var i=0;i<gBeacons.length;i++){var overlapped=interChange?GMOADRW.isAmpOverlapped(interChange,gBeacons[i]):GMOADRW.isOverlapped(GMOADRW.getPageRect(),gBeacons[i]);if(overlapped){var bi=gBeacons[i][3];var bt=gBeacons[i][2];if(typeof bi==="undefined"||typeof bt==="undefined"){continue}var insele=gLogFrame.contentWindow.document.createElement("img");if(typeof widgetId==="undefined"){var li=gBeacons[i][5];var wi=gBeacons[i][4];var ri=gBeacons[i][6]}else{var li=leadArticleId;var wi=widgetId;var ri=reqId}if(bi===1){if(createdBeaconType1FlagMap[wi]){gBeacons.splice(i,1);i-=1;continue}else{createdBeaconType1FlagMap[wi]=true}}insele.setAttribute("width","1");insele.setAttribute("height","1");insele.setAttribute("style","display: none;");insele.src=BASE_URL+INVIEW_URL+"?loc="+encodeURIComponent(d.location.href.toString())+"&li="+encodeURIComponent(li)+"&wi="+wi+"&id="+cookieId+"&ri="+ri+"&r="+encodeURIComponent(d.referrer)+"&bi="+bi+"&bt="+bt+"&t="+(new Date).getTime();gLogFrame.contentWindow.document.getElementsByTagName("body")[0].appendChild(insele);gBeacons.splice(i,1);i-=1}}}function delayProc(){clearTimeout(timer);timer=setTimeout(checkAndLog,100)}if(IS_AMP==="1"){var ampTimer;window.addEventListener("message",function(event){if(event.source!=window.parent||!event.data||event.data.sentinel!="amp"||event.data.type!="intersection"){return}event.data.changes.forEach(function(change){clearTimeout(ampTimer);ampTimer=setTimeout(function(){checkAndLog(leadArticleId,widgetId,reqId,change)},100)})})}else{window.top.addEventListener("scroll",delayProc);window.top.addEventListener("adLoaded",checkAndLogSSP);checkAndLog(leadArticleId,widgetId,reqId)}},getPageRect:function(){var y=window.top.pageYOffset||window.top.document.documentElement.scrollTop||window.top.document.body.scrollTop||0;var h=window.top.innerHeight;return[y,y+h]},getBeaconPos:function(id,widgetId,leadArticleId,reqId){var elArea=__.getLastWidgetNodeById(id);var bType=elArea.dataset.type;var bIndex=elArea.dataset.index;var y=0;var h=elArea.offsetHeight;while(elArea.offsetParent!==null){y+=elArea.offsetTop;elArea=elArea.offsetParent}var parentOffsetTop=GMOADRW.getParentOffsetTop(widgetId);y=y+parentOffsetTop;return[y,y+h,bType,bIndex,widgetId,leadArticleId,reqId]},isOverlapped:function(p,e){return p[0]<e[1]&&p[1]>e[0]},isAmpOverlapped:function(c,e){var vTop=c.intersectionRect.top>0?c.intersectionRect.top-c.boundingClientRect.top:0;var vBot=vTop+c.intersectionRect.height;return vBot>e[0]&&vTop<e[1]},getPreviewQuery:function(){var paramStr;if(IS_AMP==="1"){paramStr=encodeURI(document.referrer).split("?")[1]}else{var url=window.location.search;if(url!==""){paramStr=url.slice(1)}}if(paramStr!==undefined){var querys=paramStr.split("&");for(var i=0;i<querys.length;i++){q=querys[i].split("=");if(q[0]===PREVIEW_QUERY_STRING)return q[1]}}return""},getABTestPreviewQuery:function(){var paramStr;if(IS_AMP==="1"){paramStr=encodeURI(document.referrer).split("?")[1]}else{var url=window.location.search;if(url!==""){paramStr=url.slice(1)}}if(paramStr!==undefined){var querys=paramStr.split("&");for(var i=0;i<querys.length;i++){q=querys[i].split("=");if(q[0]===ABTEST_PREVIEW_QUERY_STRING)return q[1]}}return""},getQuery:function(param){var url=window.location.search;var querys=url.slice(1).split("&");for(var i=0;i<querys.length;i++){var q=querys[i].split("=");if(q[0]===param)return q[1]}return""},getQueryValue:function(url,param){var queryStr=url.split("?")[1];var querys=queryStr.slice(1).split("&");for(var i=0;i<querys.length;i++){var q=querys[i].split("=");if(q[0]===param)return q[1]}return""},policy:function(){window.open(TAXEL_POLICY,"_blank")},switchLogo:function(widgetNode){var container=widgetNode.getElementsByClassName("_taxel_recommend_articles")[0];var logo=widgetNode.getElementsByClassName("_taxel_recommend_credit_image")[0];var widgetTouchFlag=true;if(logo!=null){container.addEventListener("touchstart",function(){logo.style.backgroundPosition="0 -17.55px"});container.addEventListener("touchend",function(){if(widgetTouchFlag){widgetTouchFlag=false;setTimeout(function(){logo.style.backgroundPosition="0 0";widgetTouchFlag=true},2e3)}})}},changeArticleLink2Gmossp:function(widgetNode){var articles=widgetNode.getElementsByClassName("_taxel_recommend_article");var changeLinkMax=GMOSSP_REDIRECT_LINK_MAX<articles.length?GMOSSP_REDIRECT_LINK_MAX:articles.length;for(var i=0;i<=changeLinkMax-1;i++){try{var linkTag=articles[i].getElementsByTagName("a")[0];var link=linkTag.getAttribute("onmousedown");var redirectLink=link.replace(/(.*)(this\.href.{2})(.*)/,"$1$2"+GMOSSP_REDIRECT_URL);var taxelLink=link.replace(/(.*)(this\.href.{2})(.*)(&loc=.*)/,"$3");if(!taxelLink||taxelLink.length==0){continue}var clickURL="\" + \""+encodeURIComponent("&r=")+"\" + encodeURIComponent(encodeURIComponent(document.referrer))";linkTag.setAttribute("onmousedown",redirectLink+encodeURIComponent(taxelLink)+clickURL)}catch(E){}}},changeAdArticle:function(widgetNode,spaceId){var elementArticle=widgetNode.getElementsByClassName("_taxel_recommend_article");var elementAd=widgetNode.getElementsByClassName("_taxel_ad_article_"+spaceId);var artLength=elementArticle.length;var adLength=elementAd.length;for(var i=0;i<artLength;i++){if((" "+elementArticle[i].className+" ").indexOf(" _shuffle_target_ ")==-1){elementArticle[i].className+=" _shuffle_target_"}}for(var i=0;i<adLength;i++){if((" "+elementAd[i].className+" ").indexOf(" _shuffle_target_ ")==-1){elementAd[i].className+=" _shuffle_target_"}}var allElements=widgetNode.getElementsByClassName("_shuffle_target_");for(var i=0;i<allElements.length;i++){allElements[i].setAttribute("org-idx",i.toString())}var sameWidthGroup=[];for(var i=0;i<adLength;i++){if(elementAd[i].clientWidth>0){var orgIndex=elementAd[i].getAttribute("org-idx");var adArtGroup={ad_org_idx:parseInt(orgIndex),art_org_idx:[]};for(var j=0;j<artLength;j++){if(elementArticle[j].clientWidth>0&&elementArticle[j].parentNode.clientWidth==elementAd[i].parentNode.clientWidth){var artOrgIndex=parseInt(elementArticle[j].getAttribute("org-idx"));adArtGroup["art_org_idx"].push(artOrgIndex)}}if(adArtGroup["art_org_idx"].length>0){sameWidthGroup.push(adArtGroup)}}}var selArray=[];if(this.adArtShuffle(selArray,sameWidthGroup)){var changedAdCnt=0;for(var i=0;i<selArray.length;i++){if(selArray[i]!=sameWidthGroup[i]["ad_org_idx"]){changedAdCnt++;var adElement=widgetNode.querySelector("[org-idx=\""+sameWidthGroup[i]["ad_org_idx"].toString()+"\"]");var articleElement=widgetNode.querySelector("[org-idx=\""+selArray[i].toString()+"\"]");var targetArticle=articleElement.parentNode.innerHTML;var targetAd=adElement.parentNode.innerHTML;var articleAttributes=[];var adAttributes=[];for(var j=articleElement.parentNode.attributes.length-1;j>=0;j--){articleAttributes.push({name:articleElement.parentNode.attributes[j].name,value:articleElement.parentNode.attributes[j].value})}for(var j=adElement.parentNode.attributes.length-1;j>=0;j--){adAttributes.push({name:adElement.parentNode.attributes[j].name,value:adElement.parentNode.attributes[j].value})}for(var j=articleElement.parentNode.attributes.length-1;j>=0;j--){articleElement.parentNode.removeAttributeNode(articleElement.parentNode.attributes[j])}for(var j=adElement.parentNode.attributes.length-1;j>=0;j--){adElement.parentNode.removeAttributeNode(adElement.parentNode.attributes[j])}for(var j=articleAttributes.length-1;j>=0;j--){adElement.parentNode.setAttribute(articleAttributes[j]["name"],articleAttributes[j]["value"])}for(var j=adAttributes.length-1;j>=0;j--){articleElement.parentNode.setAttribute(adAttributes[j]["name"],adAttributes[j]["value"])}adElement.parentNode.innerHTML=targetArticle;articleElement.parentNode.innerHTML=targetAd}}if(changedAdCnt>0){var widgetNodeIdString=widgetNode.id;var widgetNodeId=widgetNodeIdString.substring(7);for(var i=0;i<adObjs[widgetNodeId].length;i++){var ad_org_idx=adObjs[widgetNodeId][i].nodeObj.getAttribute("org-idx");if(ad_org_idx){adObjs[widgetNodeId][i].nodeObj=widgetNode.querySelector("[org-idx=\""+ad_org_idx+"\"]")}}}if(isRequestClientCall&&changedAdCnt>0){for(var networkId in clientCallObj){for(var i=0;i<clientCallObj[networkId].adDocument.length;i++){var ad_org_idx=clientCallObj[networkId].adDocument[i].getAttribute("org-idx");if(ad_org_idx){clientCallObj[networkId].adDocument[i]=widgetNode.querySelector("[org-idx=\""+ad_org_idx+"\"]")}}}}}if(layzrEnable){layzr.update().check()}},adArtShuffle:function(selArray,sameWidthGroup){if(selArray.length===sameWidthGroup.length){return true}var next=selArray.length;var newIndex=null;var candidateIndex=sameWidthGroup[next]["art_org_idx"].slice();candidateIndex.push(sameWidthGroup[next]["ad_org_idx"]);var shuffledArticles=this.shuffle(candidateIndex);for(var i=0;i<shuffledArticles.length;i++){newIndex=shuffledArticles[i];if(!this.newIndexInvalid(next,newIndex,selArray,sameWidthGroup)){selArray.push(newIndex);if(this.adArtShuffle(selArray,sameWidthGroup)){return true}selArray.pop()}}return false},newIndexInvalid:function(next,newIndex,selArray,sameWidthGroup){for(var selCnt=0;selCnt<selArray.length;selCnt++){if(newIndex<=selArray[selCnt]){return true}}for(var groupCnt=next+1;groupCnt<sameWidthGroup.length;groupCnt++){var canCnt=0;var nextCandidateIndex=sameWidthGroup[groupCnt]["art_org_idx"].slice();nextCandidateIndex.push(sameWidthGroup[groupCnt]["ad_org_idx"]);for(canCnt=0;canCnt<nextCandidateIndex.length;canCnt++){if(newIndex<nextCandidateIndex[canCnt]){break}}if(canCnt==nextCandidateIndex.length){return true}}return false},shuffle:function(array){var m=array.length,t,i;while(m){i=Math.floor(Math.random()*m--);t=array[m];array[m]=array[i];array[i]=t}return array},setupAnimateHandler:function(widgetNode,spaceId,animOpt,layzr){var animClz="_taxel_animate_"+animOpt;var aniEls=widgetNode.querySelectorAll("._taxel_recommend_article,._taxel_ad_article_"+spaceId);[].forEach.call(aniEls,function(el){el.classList.add("_taxel_base_animate",animClz)});layzr.on("src:after",function(imEl){if(!widgetNode.contains(imEl))return;var aniEl=imEl.classList.contains("_taxel_recommend_art_img")?__.findParentWithClass(imEl,"_taxel_recommend_article"):__.findParentWithClass(imEl,"_taxel_ad_article_"+spaceId);if(aniEl&&aniEl.classList.contains(animClz)){aniEl.classList.remove(animClz)}})},findAdMovieTag:function(widgetNode){var spaceIds=[];var adMovies=widgetNode.getElementsByClassName("_taxel_ad_movie");for(var i=0;i<adMovies.length;i++){var content=adMovies[i].getElementsByClassName("_taxel_ad_movie_content")[0];var spaceId=content.getAttribute("data-id");adMovieObj.nodeObj[spaceId]=adMovies[i];spaceIds.push(spaceId);adMovies[i].style.display="none"}return spaceIds},getContentTop:function(content){var scrollTop=Math.floor(document.documentElement.scrollTop||document.body.scrollTop);var top=Math.floor(content.getBoundingClientRect().top+scrollTop);return top},getContentTopInsideIframe:function(widgetId,content){var scrollTop=Math.floor(window.top.document.documentElement.scrollTop||window.top.document.body.scrollTop);var widgetIframe=widgetIframes[widgetId];var iframeTop=widgetIframe?widgetIframe.getBoundingClientRect().top:0;var top=Math.floor(content.getBoundingClientRect().top+iframeTop+scrollTop);return top},getIframeContainWidget:function(){var iframes=window.top.document.getElementsByTagName("iframe");var widgetIframe=null;for(var i=0,len=iframes.length;i<len;i++){widgetIframe=iframes[i];if(widgetIframe.contentWindow==window){break}}return widgetIframe},getParentOffsetTop:function(widgetId){var parentOffsetTop=0;if(isTaxelWidgetInsideIframe[widgetId]){var widgetIframe=widgetIframes[widgetId];if(widgetIframe){parentOffsetTop=widgetIframe.offsetTop}}return parentOffsetTop},getViewablePixel:function(){var clientHeight=Math.floor(window.top.document.documentElement.scrollTop||window.top.document.body.scrollTop);var vpx=clientHeight+window.top.innerHeight;return vpx},callAdMovieInviewURL:function(spaceId,adHeightPosition){var beacons=adMovieObj.adObj[spaceId].iv_beacon;for(var i=0;i<beacons.length;i++){var url=beacons[i].replace(/\{\{w\}\}/,adHeightPosition);GMOADRW.otherCreateBeacon(url)}var resGmomAkFq=adMovieObj.adObj[spaceId].res_gmom_ak_fq;if(resGmomAkFq){__.setCookieValue(AKANE_FQ_COOKIE_NAME,resGmomAkFq,AKANE_FQ_EXPIRE_SECOND)}},adMovieNearInview:function(spaceId){if(adMovieObj.doneNearInview[spaceId]){return}else{adMovieObj.doneNearInview[spaceId]=true}var conId=TAXEL_AD_MOVIE_CT_ID+"_"+spaceId;var con=document.getElementById(conId);if(adMovieObj.adObj[spaceId].networkId!==AD_NEWSTV){con.style.display="block";con.height=con.clientWidth/16*9}var content=adMovieObj.adObj[spaceId].html;if(typeof adMovieObj.adObj[spaceId].html_iframe==="undefined"||adMovieObj.adObj[spaceId].html_iframe){var doc=con.contentDocument;if(adMovieObj.adObj[spaceId].networkId===AD_NEWSTV){con.addEventListener("load",function(){if(doc.body){doc.body.style.margin="0";var height=doc.body.scrollHeight||doc.documentElement.scrollHeight;if(height>0){adMovieObj.movieLoaded[spaceId]=true;con.style.display="block";con.height=height}}})}doc.open();doc.write(content);doc.close()}else{var elements=GMOADRW.getElements(content);for(var i=0;i<elements.length;i++){if(elements[i].nodeName.toLowerCase()=="script"){sc=d.createElement("script");var attrs=elements[i].attributes;for(var j=0;j<attrs.length;j++){sc.setAttribute(attrs[j].name,attrs[j].value)}sc.innerHTML=elements[i].innerHTML;con.appendChild(sc)}else{con.appendChild(elements[i].cloneNode(true))}}}},adMovieInview:function(spaceId){var node=adMovieObj.nodeObj[spaceId];var content=node.getElementsByClassName("_taxel_ad_movie_content")[0];var timerId;var delay=VIEWABLE_SEC*1e3;function startTimer(){if(!timerId){timerId=setTimeout(function(){var adHeightPosition=GMOADRW.getContentTop(node);GMOADRW.callAdMovieInviewURL(spaceId,adHeightPosition);window.removeEventListener("scroll",registerTimer);window.removeEventListener("load",registerTimer)},delay)}}function clearTimer(){if(timerId){clearTimeout(timerId);timerId=null}}function registerTimer(){if(!adMovieObj.doneNearInview[spaceId]){return}if(adMovieObj.adObj[spaceId].networkId===AD_NEWSTV&&!adMovieObj.movieLoaded[spaceId]){return}var node=adMovieObj.nodeObj[spaceId];var content=node.getElementsByClassName("_taxel_ad_movie_content")[0];var center=Math.floor(GMOADRW.getContentTop(content)+content.getBoundingClientRect().height/2);if(GMOADRW.isInsideViewport(GMOADRW.getViewablePixel(),center)){startTimer()}else{clearTimer()}}window.addEventListener("load",registerTimer);window.addEventListener("scroll",registerTimer)},isInsideViewport:function(px,center){return center<=px&&px<=center+window.top.innerHeight},otherCreateBeacon:function(url){var beacon=gLogFrame.contentWindow.document.createElement("img");beacon.setAttribute("width","1");beacon.setAttribute("height","1");beacon.setAttribute("style","display: none;");beacon.src=url;gLogFrame.contentWindow.document.getElementsByTagName("body")[0].appendChild(beacon)},handleExternalScript:function(widgetNode,leadArticleId,widgetId){var adCtns=widgetNode.getElementsByClassName(TAXEL_SC_CLZ);if(adCtns&&adCtns.length>0){__.executeScript(adCtns,leadArticleId,widgetId)}var adsDivs=widgetNode.getElementsByClassName(TAXEL_ADS_CLZ);if(adsDivs&&adsDivs.length>0){__.executeDirectScriptTxt(adsDivs,widgetId)}},getElements:function(html){var txt=d.createElement("div");txt.innerHTML=html;return txt.childNodes},insertDokuryoTag:function(dokuryoUnitKey,dokuryo){var ele1=d.createElement("script");ele1.src=DOKURYOJS;ele1.type="text/javascript";ele1.charset="utf-8";ele1.onload=function(){var scriptInside="GMOAMReading.setUnitKey(\""+dokuryoUnitKey+"\");";var ele2=d.createElement("script");ele2.type="text/javascript";ele2.innerHTML=scriptInside;d.getElementsByTagName("head")[0].appendChild(ele2)};if(dokuryo&&dokuryo.contentSelector){d.contentSelector=dokuryo.contentSelector}d.getElementsByTagName("head")[0].appendChild(ele1)},createBeaconForAdRenderCallback:function(url,adDiv){var beacon=d.createElement("img");if(IS_AMP){url+="&ref="+GMOADRW.getEncodedReferrer()}beacon.src=url;beacon.width="1";beacon.height="1";beacon.setAttribute("style","position:absolute;width:1px;height:1px;top:-16888px;left:-16888px");GMOADRW.insertAfter(beacon,adDiv)},getHostName:function(url){var parser=document.createElement("a");parser.href=url;return parser.hostname}};__.findParentWithClass=function(el,clzz){while(el&&el.parentNode){el=el.parentNode;if(el.classList&&el.classList.contains(clzz)){return el}}return null};__.isPosInt=function(num){var x;if(isNaN(num)){return false}x=parseFloat(num);return(x|0)===x&&x>=0};__.isElNearViewport=function(el,widgetId){var rect=el.getBoundingClientRect();var elementRectTop=rect.top;var elementRectBottom=rect.bottom;var wHeight=0;var viewportTop=0;if(isTaxelWidgetInsideIframe[widgetId]){wHeight=window.top.innerHeight||window.top.document.documentElement.clientHeight;viewportTop=window.top.pageYOffset||window.top.document.documentElement.scrollTop||window.top.document.body.scrollTop||0;var widgetIframe=widgetIframes[widgetId];if(widgetIframe){var iframeRect=widgetIframe.getBoundingClientRect();elementRectTop=elementRectTop+iframeRect.top;elementRectBottom=elementRectBottom+iframeRect.bottom}}else{wHeight=window.innerHeight||document.documentElement.clientHeight;viewportTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}var viewportBot=viewportTop+wHeight;var nearBeaconTop=elementRectTop+viewportTop-TAXEL_SCRIPT_NEAR_INVIEW_PX;var nearBeaconBot=elementRectBottom+viewportTop+TAXEL_SCRIPT_NEAR_INVIEW_PX;return elementRectTop>=0&&viewportBot>=nearBeaconTop||elementRectTop<0&&viewportTop<=nearBeaconBot};__.executeScript=function(scCtns,articleId,widgetId){var scArr=Array.prototype.slice.call(scCtns);var timerId;var elNum=scArr.length;var numDone=0;function eachExecuteScript(ctn){var type=ctn.getAttribute("data-type");var responsiveMovie=ctn.getAttribute("data-responsive-movie");var ifr=document.createElement("iframe");var ifrId=TAXEL_IF_ID+"-"+articleId+"-"+i;ifr.scrolling="no";ifr.frameBorder="0";ifr.height="0";if(type!=="1"){ifr.style.display="none"}ifr.setAttribute("id",ifrId);ifr.classList?ifr.classList.add(TAXEL_IF_CLZ):ifr.className=TAXEL_IF_CLZ;var ctnParentNode=ctn.parentNode;ctnParentNode.replaceChild(ifr,ctn);var doc=ifr.contentDocument;ifr.addEventListener("load",function(){if(responsiveMovie){ifr.style.display="block";var movieContentHeight=0;var movieContent=doc.getElementsByClassName("_add_taxel_movie_content")[0];if(movieContent){movieContent.style.cssText="overflow: hidden !important;";ctnParentNode.appendChild(movieContent);movieContentHeight=ctnParentNode.getElementsByClassName("_add_taxel_movie_content")[0].getBoundingClientRect().height}ifr.width="100%";var ifrHeight=ifr.getBoundingClientRect().width/16*9;ifr.height=ifrHeight;ctnParentNode.style.height=ifrHeight+movieContentHeight}else{var lHeight=0,nRun=0,nHeight,heightChkTimer;chkHeight();function chkHeight(){nHeight=doc.body.scrollHeight||doc.documentElement.scrollHeight;if(lHeight!==nHeight){if(ifr.style.display==="none"){ifr.style.display="block"}ifr.height=nHeight;lHeight=nHeight}if(heightChkTimer){clearTimeout(heightChkTimer)}if(++nRun<MAX_IF_TIMER_RUN){heightChkTimer=setTimeout(chkHeight,IF_TIMEOUT)}}}});var content="<body marginwidth=\"0\" marginheight=\"0\" ><base target=\"_parent\" /><script>window.inDapIF = true;</script>"+ctn.innerHTML+"</body>";doc.open();doc.write(content);doc.close()}function executeCallback(){clearTimeout(timerId);timerId=setTimeout(function(){for(var i=0;i<scArr.length;i++){if(__.isElNearViewport(scArr[i],widgetId)||bannerNearInviewEnable===0){eachExecuteScript(scArr[i]);scArr.splice(i--,1);if(++numDone===elNum){if(isTaxelWidgetInsideIframe[widgetId]){window.top.removeEventListener("scroll",executeCallback)}else{window.removeEventListener("scroll",executeCallback)}}}}},100)}if(isTaxelWidgetInsideIframe[widgetId]){window.top.addEventListener("load",executeCallback);window.top.addEventListener("scroll",executeCallback)}else{window.addEventListener("load",executeCallback);window.addEventListener("scroll",executeCallback)}};__.executeDirectScriptTxt=function(parentEls,widgetId){var prArr=Array.prototype.slice.call(parentEls);var timerId;var elNum=prArr.length;var numDone=0;function isNodeNameEq(el,name){return el.nodeName&&el.nodeName.toUpperCase()===name.toUpperCase()}function createScriptEl(el){var sc=document.createElement("script");var attrs=el.attributes;for(var i=0,len=attrs.length;i<len;i++){sc.setAttribute(attrs[i].name,attrs[i].value)}if(!el.src){sc.type="text/javascript";sc.textContent=el.textContent}return sc}function executeCallback(){clearTimeout(timerId);timerId=setTimeout(function(){for(var i=0;i<prArr.length;i++){var pEl=prArr[i];if(__.isElNearViewport(pEl,widgetId)||bannerNearInviewEnable===0){var childNodes=pEl.childNodes;for(var j=0,len=childNodes.length;j<len;j++){var child=childNodes[j];if(isNodeNameEq(child,"script")&&(!child.type||child.type.toLowerCase()==="text/javascript")){pEl.replaceChild(createScriptEl(child),child)}}prArr.splice(i--,1);if(++numDone===elNum){if(isTaxelWidgetInsideIframe[widgetId]){window.top.removeEventListener("scroll",executeCallback)}else{window.removeEventListener("scroll",executeCallback)}}}}},100)}if(isTaxelWidgetInsideIframe[widgetId]){window.top.addEventListener("load",executeCallback);window.top.addEventListener("scroll",executeCallback)}else{window.addEventListener("load",executeCallback);window.addEventListener("scroll",executeCallback)}};__.getCookieValue=function(ke){var full_cookie_data=d.cookie;var array_cookies=full_cookie_data.split(";");for(var i=0;i<array_cookies.length;i++){var tmp=array_cookies[i].split("=");var val=tmp[0].replace(/(^\s+)|(\s+$)/g,"");if(val==ke){return tmp[1]}}return""};__.setCookieValue=function(name,cookieValue,expire){var date=new Date;date.setSeconds(date.getSeconds()+expire);d.cookie=name+"="+cookieValue+"; expires="+date.toGMTString()+"; path=/"+";"};__.hasCookie=function(name){return d.cookie.indexOf(name+"=")!==-1};__.createWidgetScript=function(displayedIds){var session=__.getCookieValue(SESSION_COOKIE_NAME+mediaId);var previewQueryVal=GMOADRW.getPreviewQuery();var addQueryVal="";if(previewQueryVal!==""){addQueryVal="&"+PREVIEW_QUERY_STRING+"="+previewQueryVal}var previewRandomQueryVal=GMOADRW.getQuery(RANDOM_QUERY_STRING);if(previewRandomQueryVal!==""){addQueryVal+="&"+RANDOM_QUERY_STRING+"="+previewRandomQueryVal}var optionalContent=__.getOptionalContent();if(optionalContent){addQueryVal+="&"+OPTIONAL_QUERY_STRING+"="+optionalContent}var abtestPreviewQueryVal=GMOADRW.getABTestPreviewQuery();if(abtestPreviewQueryVal!==""){addQueryVal="&"+ABTEST_PREVIEW_QUERY_STRING+"="+abtestPreviewQueryVal}var ele=d.createElement("script");ele.src=BASE_URL+TAG_URL+"?loc="+encodeURIComponent(d.location.href.toString())+"&wi="+displayedIds+"&id="+cookieId+"&s="+session+"&t="+(new Date).getTime()+"&st="+(new Date).getTime()+"&rid="+requestId+"&air="+encodeURIComponent(articleIdRes)+"&r="+encodeURIComponent(d.referrer)+"&mid="+mediaId+addQueryVal;
ele.async=true;ele.type="text/javascript";var insNode=__.getLastWidgetNodeById("gmo_rw_"+displayedIds[0]);insNode.parentNode.insertBefore(ele,insNode)};__.createNotFoundBeacon=function(){var notFoundUrl=BASE_URL+NOT_FOUND_URL+"?loc="+encodeURIComponent(location.href)+"&mid="+mediaId;GMOADRW.otherCreateBeacon(notFoundUrl)};__.sendDummyRequest=function(){var session=__.getCookieValue(SESSION_COOKIE_NAME+DUMMY_MEDIA_ID);var time=(new Date).getTime();var ele=d.createElement("script");ele.src=BASE_URL+TAG_URL+"?loc="+encodeURIComponent(d.location.href.toString())+"&wi="+DUMMY_WIDGET_ID+"&id="+cookieId+"&wgi=&s="+session+"&t="+time+"&st="+time+"&rid="+requestId+"&air="+encodeURIComponent(articleIdRes)+"&r="+encodeURIComponent(d.referrer)+"&mid="+mediaId;ele.async=true;ele.type="text/javascript";d.getElementsByTagName("head")[0].appendChild(ele)};__.getWidgetIds=function(){var divs=d.getElementsByTagName("div");if(Ids.length===0){if(mediaId==="69"){for(var i=0,len=divs.length;i<len;i++){if(divs[i].id.match(/^gmo\_rw\_/)){var wId=divs[i].id.replace(/^gmo\_rw\_/g,"");if(Ids.indexOf(wId)==-1){Ids.push(wId)}}}}else{for(var i=0,len=divs.length;i<len;i++){if(divs[i].dataset.gmoad!=null&&divs[i].dataset.gmoad=="rw"){if(divs[i].id.match(/^gmo\_rw\_/)){var wId=divs[i].id.replace(/^gmo\_rw\_/g,"");if(Ids.indexOf(wId)==-1){Ids.push(wId)}}}}}}return Ids};__.getLastWidgetNodeById=function(widgetId){var divs=d.getElementsByTagName("div");for(var i=divs.length-1;i>=0;i--){if(divs[i].id.match(widgetId)){return divs[i]}}return null};__.getLastWidgetNodeBySpaceId=function(spaceId){var divs=d.getElementsByClassName(spaceId);return divs[divs.length-1]};__.getArticleIdResource=function(){if(notFoundNode!=null){return location.href}if(IS_AMP==="1"){var meta=d.getElementsByTagName("meta");for(var i=0;i<meta.length;i++){if(meta[i].getAttribute("property")=="og:url"){return meta[i].getAttribute("content")}}return""}var meta=d.getElementsByTagName("meta");var link=d.getElementsByTagName("link");switch(gmoArticleIdRule){case 1:for(var i=0;i<meta.length;i++){if(meta[i].getAttribute("property")=="og:url"){return meta[i].getAttribute("content")}}break;case 2:for(var i=0;i<link.length;i++){if(link[i].getAttribute("rel")==="canonical"){return link[i].getAttribute("href")}}break;case 3:if("href"in d.location){return location.href}break;case 4:for(var i=0;i<meta.length;i++){if(meta[i].getAttribute("property")=="og:url"){return meta[i].getAttribute("content")}}if("href"in d.location){return location.href}break;default:return""}return""};__.taxel_url_replace=function(url){for(var regKey in urlReplaceRules){if(urlReplaceRules.hasOwnProperty(regKey)){url=url.replace(new RegExp(regKey),urlReplaceRules[regKey])}}return url};__.taxel_link_completion=function(ogUrl){if(ogUrl.substr(0,2)=="//"){return location.protocol+ogUrl}else if(ogUrl.substr(0,1)=="/"){return location.origin+ogUrl}return ogUrl};__.getOptionalContent=function(){var optContent="";if(typeof crawlRule.optional!=="undefined"&&typeof crawlRule.optional.tag!=="undefined"){var el$=document.querySelector(crawlRule.optional.tag);if(el$!==null){if(typeof crawlRule.optional.attr!=="undefined"){optContent=el$.getAttribute(crawlRule.optional.attr)}else{optContent=el$.innerText||el$.textContent}if(typeof crawlRule.optional.regex!=="undefined"&&typeof crawlRule.optional.replacement!=="undefined"){optContent=optContent.replace(new RegExp(crawlRule.optional.regex,"g"),crawlRule.optional.replacement)}}}return optContent};__.createAndGetBeaconFrame=function(){var iframe=document.createElement("iframe");iframe.setAttribute("id","gmorw_log");iframe.setAttribute("width","1");iframe.setAttribute("height","1");iframe.setAttribute("style","display: none;");document.body.appendChild(iframe);return document.getElementById("gmorw_log")};load3rdScripts();gLogFrame=__.createAndGetBeaconFrame();var notFoundNode=d.getElementById(TAXEL_ARTICLE_NOT_EXISTS_ID);if(notFoundNode!=null){__.createNotFoundBeacon()}var articleIdRes=__.taxel_link_completion(__.taxel_url_replace(__.getArticleIdResource()));var requestId=__.getCookieValue(REQUEST_ID_COOKIE_NAME);GMOADRW.removeReqIdCookie();var cookie1stId=__.getCookieValue(FIRST_COOKIE_ID_COOKIE_NAME);if(cookie1stId==""||!/^\d{2}/.test(cookie1stId)){__.setCookieValue(FIRST_COOKIE_ID_COOKIE_NAME,cookieId,FIRST_COOKIE_ID_EXPIRE_SECOND)}else{__.setCookieValue(FIRST_COOKIE_ID_COOKIE_NAME,cookie1stId,FIRST_COOKIE_ID_EXPIRE_SECOND);cookieId=cookie1stId}GMOADRW.initCriteo();var Ids=__.getWidgetIds();var displayedIds=[];var displayCnt=0;for(var i=0;i<Ids.length;i++){var insNode=__.getLastWidgetNodeById("gmo_rw_"+Ids[i]);if(insNode&&insNode.style.display!=="none"){displayedIds.push(Ids[i]);displayCnt++}}if(displayCnt===0){__.sendDummyRequest()}else{__.createWidgetScript(displayedIds)}/*!
   * @license
   * https://gist.github.com/paulirish/1579671
   * requestAnimationFrame polyfill by Erik Möller. Fixes from Paul Irish, Tino Zijdel
   * MIT license
   */
!function(){var n=["ms","moz","webkit","o"],e="AnimationFrame",i=0;"performance"in window==!1&&(window.performance={}),Date.now||(Date.now=function(){return(new Date).getTime()}),"now"in window.performance==!1&&!function(){var n=Date.now();performance.timing&&performance.timing.navigationStart&&(n=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-n}}();for(var o=0;o<n.length&&!window.requestAnimationFrame;++o){var a=n[o];window.requestAnimationFrame=window[a+"Request"+e],window.cancelAnimationFrame=window[a+"Cancel"+e]||window[a+"CancelRequest"+e]}window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var e=Date.now(),o=Math.max(0,16-(e-i)),a=window.setTimeout(function(){return n(e+o)},o);return i=e+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){return clearTimeout(n)})}();/*!
   * @license
   * Layzr.js 2.2.1 - A small, fast, and modern library for lazy loading images.
   * Copyright (c) 2016 Michael Cavalea - http://callmecavs.github.io/layzr.js/
   * License: MIT
   */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Layzr=e()}(this,function(){"use strict";var t={};t["extends"]=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var e=function(){function e(t,e){return c[t]=c[t]||[],c[t].push(e),this}function n(t,n){return n._once=!0,e(t,n),this}function r(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return e?c[t].splice(c[t].indexOf(e),1):delete c[t],this}function i(t){for(var e=this,n=arguments.length,i=Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];var s=c[t]&&c[t].slice();return s&&s.forEach(function(n){n._once&&r(t,n),n.apply(e,i)}),this}var o=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c={};return t["extends"]({},o,{on:e,once:n,off:r,emit:i})},n=function(){function t(){return window.scrollY||window.pageYOffset}function n(){d=t(),r()}function r(){l||(requestAnimationFrame(function(){return u()}),l=!0)}function i(t){return t.getBoundingClientRect().top+d}function o(t){var e=d,n=e+v,r=i(t),o=r+t.offsetHeight,c=m.threshold/100*v;return o>=e-c&&n+c>=r}function c(t){if(w.emit("src:before",t),p&&t.hasAttribute(m.srcset))t.setAttribute("srcset",t.getAttribute(m.srcset));else{var e=g>1&&t.getAttribute(m.retina);t.setAttribute("src",e||t.getAttribute(m.normal))}w.emit("src:after",t),[m.normal,m.retina,m.srcset].forEach(function(e){return t.removeAttribute(e)}),a()}function s(t){var e=t?"addEventListener":"removeEventListener";return["scroll","resize"].forEach(function(t){return window[e](t,n)}),this}function u(){return v=window.innerHeight,h.forEach(function(t){return o(t)&&c(t)}),l=!1,this}function a(){return h=Array.prototype.slice.call(document.querySelectorAll("["+m.normal+"]")),this}var f=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=t(),l=void 0,h=void 0,v=void 0,m={normal:f.normal||"data-normal",retina:f.retina||"data-retina",srcset:f.srcset||"data-srcset",threshold:f.threshold||0},p=document.body.classList.contains("srcset")||"srcset"in document.createElement("img"),g=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,w=e({handlers:s,check:u,update:a});return w};return n});function load3rdScripts(){/*!
     * @license
     * https://github.com/remy/polyfills
     * MIT license
     */
!function(){function t(){s=!0,this.removeEventListener("DOMAttrModified",t,!1)}function e(t){return t.replace(o,function(t,e){return e.toUpperCase()})}function n(){var t={};return r.call(this.attributes,function(n){(i=n.name.match(d))&&(t[e(i[1])]=n.value)}),t}function a(t,e,n){Object.defineProperty?Object.defineProperty(t,e,{get:n}):t.__defineGetter__(e,n)}var i,r=[].forEach,d=/^data-(.+)/,o=/\-([a-z])/gi,c=document.createElement("div"),s=!1;void 0==c.dataset&&(c.addEventListener("DOMAttrModified",t,!1),c.setAttribute("foo","bar"),a(Element.prototype,"dataset",s?function(){return this._datasetCache||(this._datasetCache=n.call(this)),this._datasetCache}:n),document.addEventListener("DOMAttrModified",function(t){delete t.target._datasetCache},!1))}()}})(document);
